<Project>

  <PropertyGroup>
    <SubmitID>$([System.DateTime]::Now.ToString("yyyy_MM_dd_HH_mm_ss"))</SubmitID>
    <SubmitFile>Archives\$(SubmitID)</SubmitFile>
    <SubmitMessage>auto commit</SubmitMessage>
  </PropertyGroup>


  <Target Name="CreateSubmitID">
    <WriteLinesToFile 
      File="$(SubmitFile)" 
      Lines="" 
      Overwrite="True"
      Condition="!Exists($(SubmitFile))"/>
  </Target>

  <Target Name="Push" AfterTargets="CreateSubmitID">
    <Exec Command="git add ."/>
    <Exec Command='git config --global user.email ""'/>
    <Exec Command='git config --global user.name ""'/>
    <Exec Command='git commit -m "$(SubmitMessage)"'/>
    <Exec Command="git push --set-upstream https://$(TOKEN_AUTO_PUSH)@github.com/ZiYuCai1984/Rustle.fmLuWorks.Automation.DailyPush master"/>
  </Target>


</Project>    